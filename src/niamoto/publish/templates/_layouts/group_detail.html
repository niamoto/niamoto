{% extends "_layouts/_base.html" %}

{% block content %}
    {# Try to find a meaningful title for the item #}
    {% set item_title = item.name | default(item.plot_name) | default(item[id_column]) %}
    {# Define page_title for the base template #}
    {% set page_title = item_title|string + ' | ' + (site.title | default('Niamoto Export')) %}

    <h2>{{ item_title }}</h2>

    {# Section for Raw Item Details (Optional - could be replaced by widgets) #}
    {# Consider making this display conditional or removing if all info is in widgets #}
    {#
    <h3>Details</h3>
    <pre>{{ item | tojson(indent=2) }}</pre>
    #}

    {# Section for Rendered Widgets #}
    {% if widgets %}
        <h3>Visualizations</h3>
        {% for widget_key, widget_html in widgets.items() %}
            {{ widget_html | safe }}
        {% endfor %}
    {% else %}
        <p>No visualizations configured for this item.</p>
    {% endif %}

{% endblock %}

{# Include widget dependencies in base template blocks #}
{% block styles %}
    {{ super() }}
    {# Add specific detail page styles if needed #}
{% endblock %}

{% block scripts %}
    {{ super() }}
    {# Add specific detail page scripts if needed #}
{% endblock %}
